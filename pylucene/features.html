
<head>
  <!--
      Licensed to the Apache Software Foundation (ASF) under one or more
      contributor license agreements.  See the NOTICE file distributed with
      this work for additional information regarding copyright ownership.
      The ASF licenses this file to You under the Apache License, Version 2.0
      (the "License"); you may not use this file except in compliance with
      the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE- 2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

  
    <link href="../css/global.css" rel="stylesheet" type="text/css">
    <link href="../css/pylucene.css" rel="stylesheet" type="text/css">

  <title>Apache Lucene - </title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
  <meta name="Distribution" content="Global"/>
  <meta name="Robots" content="index,follow"/>
  <meta name="keywords"
        content="apache, jcc, pylucene, lucene, apache pylucene, apache jcc,
  apache lucene, python java, open source"/>

  <link rel="shortcut icon" type="image/x-icon" href="/images/lucene-favicon.ico"/>
  
<script type="text/javascript" src="../scripts/prototype.js"></script>
<script type="text/javascript" src="../scripts/effects.js"></script>
<script type="text/javascript" src="../scripts/search.js"></script>
<script type="text/javascript" src="../scripts/slides.js"></script>

<!--<script type="text/javascript" src="scripts/jquery.js"></script>-->

</head>


<body id="home">
<div id="wrap">
  <div id="header">
    <div id="logo" style="float:left">
      
  <a href="index.html"><img border="0" src="../images/lucene_logo_green_300.png"
                                            alt="Lucene Logo"/></a><div style="position:absolute;right:100px;top:10px"><span style="vertical-align: super; font-size: xx-small">TM</span></div>


    </div>
    <div id="search" style="float:right;zoom:1">
  <script type="text/javascript">
    function getBlank(input, stdValue) {
      if (input.value == stdValue) {
        input.value = '';
      }
      return true;
    }

    function submitForm(form) {
      provider = form.elements['searchProvider'].value;
      if (provider == "any") {
        if (Math.random() > 0.5) {
          provider = "lucid";
        } else {
          provider = "sl";
        }
      }

      if (provider == "lucid") {
        form.action = "http://find.searchhub.org/p:lucene,solr";
      } else if (provider == "sl") {
        form.action = "http://search-lucene.com/lucene";
      }

      days = 90; // cookie will be valid for 90 days
      date = new Date();
      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
      expires = "; expires=" + date.toGMTString();
      document.cookie = "searchProvider=" + provider + expires + "; path=/";

      return true;
    }
  </script>
  <form id="quick-search" method="GET" onsubmit="return submitForm(this)"
        action="http://search-lucene.com/lucene"
        name="searchform">
    <fieldset>
      <input type="search" id="q" name="q" value="Search with Apache Solr..." class="class1 class2 hint" accesskey="q"
             onfocus="getBlank(this, 'Search with Apache Solr...')">
      <span style="color:white">@</span>
      <select name="searchProvider" id="searchProvider">
        <option value="any">select provider</option>
        <option value="lucid">Lucid Find</option>
        <option value="sl">Search-Lucene</option>
      </select>
    </fieldset>
    <script type="text/javascript">
      if (document.cookie.length > 0) {
        cStart = document.cookie.indexOf("searchProvider=");
        if (cStart != -1) {
          cStart = cStart + "searchProvider=".length;
          cEnd = document.cookie.indexOf(";", cStart);
          if (cEnd == -1) {
            cEnd = document.cookie.length;
          }
          provider = unescape(document.cookie.substring(cStart, cEnd));
          document.forms['searchform'].elements['searchProvider'].value = provider;
        }
      }
    </script>
  </form>
</div>

    <div id="nav">
      
  
<ul>
  <li><a href="index.html">PyLucene</a></li>
  <li><a href="jcc/index.html">JCC</a></li>
  <li><a href="https://issues.apache.org/jira/browse/PYLUCENE">Issue Tracker</a></li>
  <li><a href="mailing-lists.html">Mailing Lists</a></li>
  <li><a class="last" href="../index.html">Lucene TLP</a></li>
</ul>


    </div>
    

  </div> 
  <div id="content-wrap" class="clearfix">
    <div id="main">
      <h1 class="title"></h1>

      <div><style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h2 id="warning">Warning<a class="headerlink" href="#warning" title="Permanent link">&para;</a></h2>
<p>Before calling any PyLucene API that requires the Java VM, start it by
calling <i>initVM(classpath, ...)</i>. 
More about this function in <a href="jcc/features.html">here</a>.</p>
<h2 id="installing-pylucene">Installing PyLucene<a class="headerlink" href="#installing-pylucene" title="Permanent link">&para;</a></h2>
<p>PyLucene is a Python extension built with 
<a href="jcc/">JCC</a>.</p>
<p>To build PyLucene, JCC needs to be built first. Sources for JCC are
included with the PyLucene sources. Instructions for building and
installing JCC are <a href="jcc/install.html">here</a>. </p>
<p>Instruction for building PyLucene
are <a href="install.html">here</a>.</p>
<h2 id="api-documentation">API documentation<a class="headerlink" href="#api-documentation" title="Permanent link">&para;</a></h2>
<p>PyLucene is closely tracking Java Lucene<span style="vertical-align: super; font-size: xx-small">TM</span> releases. It intends to
supports the entire Lucene API.</p>
<p>PyLucene also includes a number of Lucene contrib packages: the
Snowball analyzer and stemmers, the highlighter package, analyzers
for other languages than english, regular expression queries, 
specialized queries such as 'more like this' and more.</p>
<p>This document only covers the pythonic extensions to Lucene offered
by PyLucene as well as some differences between the Java and Python
APIs. For the documentation on Java Lucene APIs,
see <a href="https://lucene.apache.org/java/docs/api/index.html">here</a>.</p>
<p>To help with debugging and to support some Lucene APIs, PyLucene also
exposes some Java runtime APIs.</p>
<h2 id="samples">Samples<a class="headerlink" href="#samples" title="Permanent link">&para;</a></h2>
<p>The best way to learn PyLucene is to look at the samples and tests
included with the PyLucene source release or on the web at:</p>
<ul>
<li>
<p><a href="https://svn.apache.org/viewcvs.cgi/lucene/pylucene/trunk/samples">https://svn.apache.org/viewcvs.cgi/lucene/pylucene/trunk/samples</a></p>
</li>
<li>
<p><a href="https://svn.apache.org/viewcvs.cgi/lucene/pylucene/trunk/test">https://svn.apache.org/viewcvs.cgi/lucene/pylucene/trunk/test</a></p>
</li>
</ul>
<h2 id="threading-support-with-attachcurrentthread">Threading support with attachCurrentThread<a class="headerlink" href="#threading-support-with-attachcurrentthread" title="Permanent link">&para;</a></h2>
<p>Before PyLucene APIs can be used from a thread other than the main
thread that was not created by the Java Runtime, the
<i>attachCurrentThread()</i> method must be called on the
<i>JCCEnv</i> object returned by the <i>initVM()</i>
or <i>getVMEnv()</i> functions.</p>
<h2 id="exception-handling-with-lucenejavaerror">Exception handling with lucene.JavaError<a class="headerlink" href="#exception-handling-with-lucenejavaerror" title="Permanent link">&para;</a></h2>
<p>Java exceptions are caught at the language barrier and reported to
Python by raising a JavaError instance whose args tuple contains the
actual Java Exception instance.</p>
<h2 id="handling-java-arrays">Handling Java arrays<a class="headerlink" href="#handling-java-arrays" title="Permanent link">&para;</a></h2>
<p>Java arrays are returned to Python in a <i>JArray</i>
wrapper instance that implements the Python sequence protocol. It
is possible to change array elements but not to change the array
size.</p>
<p>A few Lucene APIs take array arguments and expect values to be
returned in them. To call such an API and be able to retrieve the
array values after the call, a Java array needs to instantiated
first.<br/>
For example, accessing termDocs:</p>
<p><code>
termDocs = reader.termDocs(Term("isbn", isbn))<br/>
docs = JArray('int')(1)   # allocate an int[1] array<br/>
freq = JArray('int')(1)   # allocate an int[1] array<br/>
if termDocs.read(docs, freq) == 1:<br/>
&nbsp;&nbsp;bits.set(docs[0])     # access the array's first element<br/>
</code></p>
<p>In addition to <i>int</i>, the <i>JArray</i>
function accepts <i>object</i>, <i>string</i>,
<i>bool</i>, <i>byte</i>, <i>char</i>,
<i>double</i>, <i>float</i>, <i>long</i>
and <i>short</i> to create an array of the corresponding
type. The <i>JArray('object')</i> constructor takes a second
argument denoting the class of the object elements. This argument
is optional and defaults to Object.</p>
<p>To convert a char array to a Python string use a
<i>''.join(array)</i> construct.</p>
<p>Instead of an integer denoting the size of the desired Java array,
a sequence of objects of the expected element type may be passed
in to the array constructor.<br/>
For example:</p>
<p><code>
# creating a Java array of double from the [1.5, 2.5] list<br/>
JArray('double')([1.5, 2.5])<br/>
</code></p>
<p>All methods that expect an array also accept a sequence of Python
objects of the expected element type. If no values are expected
from the array arguments after the call, it is hence not necessary
to instantiate a Java array to make such calls.</p>
<p>See <a href="jcc/features.html">JCC</a> for more
information about handling arrays.</p>
<h2 id="differences-between-the-java-lucene-and-pylucene-apis">Differences between the Java Lucene and PyLucene APIs<a class="headerlink" href="#differences-between-the-java-lucene-and-pylucene-apis" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>The PyLucene API exposes all Java Lucene classes in a flat namespace
in the PyLucene module. For example, the Java import
statement <code>import
org.apache.lucene.index.IndexReader;</code> corresponds to the
Python import statement <code>from lucene import
IndexReader</code></p>
</li>
<li>
<p>Downcasting is a common operation in Java but not a concept in
Python. Because the wrapper objects implementing exactly the
APIs of the declared type of the wrapped object, all classes
implement two class methods called instance_ and cast_ that
verify and cast an instance respectively.</p>
</li>
</ul>
<h2 id="pythonic-extensions-to-the-java-lucene-apis">Pythonic extensions to the Java Lucene APIs<a class="headerlink" href="#pythonic-extensions-to-the-java-lucene-apis" title="Permanent link">&para;</a></h2>
<p>Java is a very verbose language. Python, on the other hand, offers
many syntactically attractive constructs for iteration, property
access, etc... As the Java Lucene samples from the <em>Lucene in
Action</em> book were ported to Python, PyLucene received a number
of pythonic extensions listed here:</p>
<ul>
<li>
<p>Iterating search hits is a very common operation. Hits instances
are iterable in Python. Two values are returned for each
iteration, the zero-based number of the document in the Hits
instance and the document instance itself.<br/>
The Java loop:
<code>
for (int i = 0; i &lt; hits.length(); i++) {<br/>
&nbsp;&nbsp;Document doc = hits.doc(i);<br/>
&nbsp;&nbsp;System.out.println(hits.score(i) + " : " + doc.get("title"));<br/>
}<br/>
</code>
can be written in Python:
<code>
for hit in hits:<br/>
&nbsp;&nbsp;hit = Hit.cast_(hit)<br/>
&nbsp;&nbsp;print hit.getScore(), ':', hit.getDocument['title']<br/>
</code>
if hit.iterator()'s next() method were declared to return
<i>Hit</i> instead of <i>Object</i>, the above
cast_() call would not be unnecessary.<br/>
The same java loop can also be written:
<code>
for i xrange(len(hits)):<br/>
&nbsp;&nbsp;print hits.score(i), ':', hits[i]['title']<br/>
</code></p>
</li>
<li>
<p>Hits instances partially implement the Python 'sequence'
protocol.<br/>
The Java expressions:
<code>
hits.length();<br/>
doc = hits.get(i);<br/>
</code>
are better written in Python:
<code>
len(hits)<br/>
doc = hits[i]<br/>
</code></p>
</li>
<li>
<p>Document instances have fields whose values can be accessed
through the mapping protocol.<br/>
The Java expression:
<code>
doc.get("title")
</code>
is better written in Python:
<code>
doc['title']
</code></p>
</li>
<li>
<p>Document instances can be iterated over for their fields.<br/>
The Java loop:
<code>
Enumeration fields = doc.getFields();<br/>
while (fields.hasMoreElements()) {<br/>
&nbsp;&nbsp;Field field = (Field) fields.nextElement();<br/>
&nbsp;&nbsp;...<br/>
}<br/>
</code>
is better written in Python:
<code>
for field in doc.getFields():<br/>
&nbsp;&nbsp;field = Field.cast_(field)<br/>
&nbsp;&nbsp;...<br/>
</code>
Once JCC heeds Java 1.5 type parameters and once Java Lucene
makes use of them, such casting should become unncessary.</p>
</li>
</ul>
<h2 id="extending-java-lucene-classes-from-python">Extending Java Lucene classes from Python<a class="headerlink" href="#extending-java-lucene-classes-from-python" title="Permanent link">&para;</a></h2>
<p>Many areas of the Lucene API expect the programmer to provide
their own implementation or specialization of a feature where
the default is inappropriate. For example, text analyzers and
tokenizers are an area where many parameters and environmental
or cultural factors are calling for customization.</p>
<p>PyLucene enables this by providing Java extension points listed
below that serve as proxies for Java to call back into the
Python implementations of these customizations.</p>
<p>These extension points are simple Java classes that JCC
generates the native C++ implementations for. It is easy to add
more such extensions classes into the 'java' directory of the
PyLucene source tree.</p>
<p>To learn more about this topic, please refer to the JCC
<a href="jcc/features.html">documentation</a>.</p>
<p>Please refer to the classes in the 'java' tree for currently
available extension points. Examples of uses of these extension
points are to be found in PyLucene's unit tests.</p></div>
      


      
      <div><style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h2 id="the-apache-software-foundation">The Apache Software Foundation<a class="headerlink" href="#the-apache-software-foundation" title="Permanent link">&para;</a></h2>
<p>The <a href="http://www.apache.org">Apache Software Foundation</a> provides support for the Apache community of open-source software projects. The Apache projects are defined by collaborative consensus based processes, an open, pragmatic software license and a desire to create high quality software that leads the way in its field. Apache Lucene, Apache Solr, Apache PyLucene, Apache Open Relevance Project and their respective logos are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p></div>
      
    </div>
    
  
<div id="sidebar">
  <div class="button-wrapper" style="margin-top: 40px;">
    <div class="button-green">
      <a href="http://www.apache.org/dyn/closer.lua/lucene/pylucene/">Download</a>
      <div class="flap top">Click to begin</div>
      <div class="flap bottom">of Apache PyLucene</div>
    </div>
  </div>
  <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h1 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="https://www.apache.org/licenses/">License</a></li>
<li><a href="features.html">Features</a></li>
<li><a href="install.html">Install</a></li>
</ul>
<h1 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h1>
<ul>
<li><a  href="https://www.apache.org/events/current-event.html" target="_blank"><img src="https://www.apache.org/events/current-event-125x125.png"/></a></li>
</ul>
<h1 id="asf-links">ASF links<a class="headerlink" href="#asf-links" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="http://www.apache.org">Apache Software Foundation</a></li>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
<h1 id="related-projects">Related Projects<a class="headerlink" href="#related-projects" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="http://hadoop.apache.org">Apache Hadoop</a></li>
<li><a href="http://manifoldcf.apache.org/">Apache ManifoldCF</a></li>
<li><a href="http://lucenenet.apache.org/">Apache Lucene.Net</a></li>
<li><a href="http://lucy.apache.org/">Apache Lucy</a></li>
<li><a href="http://mahout.apache.org">Apache Mahout</a></li>
<li><a href="http://nutch.apache.org">Apache Nutch</a></li>
<li><a href="http://opennlp.apache.org/">Apache OpenNLP</a></li>
<li><a href="http://tika.apache.org">Apache Tika</a></li>
<li><a href="http://zookeeper.apache.org">Apache Zookeeper</a></li>
</ul>
</div>


  </div>
  <div id="footer">
  <div class="copyright">
    <p>
      Copyright &copy; 2011-2019 The Apache Software Foundation, Licensed under
      the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.  <a href="/privacy.html">Privacy Policy</a>
      <br/>
      Apache and the Apache feather logo are trademarks of The Apache Software Foundation.  Apache Lucene, Apache Solr and their
      respective logos are trademarks of the Apache Software Foundation.  Please see the <a href="http://www.apache.org/foundation/marks/">Apache Trademark Policy</a>
      for more information.
    </p>
  </div>
</div>

</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-94576-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>

